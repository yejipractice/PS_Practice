import sys
input = sys.stdin.readline

n, m = map(int, input().split())

board = []
for _ in range(n):
    board.append(list(map(int, input().split())))

tets = [
    [[0, 0], [0, 1], [0, 2], [0, 3]],
    [[0, 0], [1, 0], [2, 0], [3, 0]],
    [[0, 0], [1, 0], [2, 0], [0, 1]],
    [[0, 0], [1, 0], [2, 0], [1, 1]],
    [[0, 0], [1, 0], [2, 0], [2, 1]],
    [[0, 0], [1, 0], [2, 0], [0, -1]],
    [[0, 0], [1, 0], [2, 0], [1, -1]],
    [[0, 0], [1, 0], [2, 0], [2, -1]],
    [[0, 0], [0, 1], [0, 2], [1, 0]],
    [[0, 0], [0, 1], [0, 2], [1, 1]],
    [[0, 0], [0, 1], [0, 2], [1, 2]],
    [[0, 0], [0, 1], [0, 2], [-1, 0]],
    [[0, 0], [0, 1], [0, 2], [-1, 1]],
    [[0, 0], [0, 1], [0, 2], [-1, 2]],
    [[0, 0], [0, 1], [1, 0], [1, 1]],
    [[1, 0], [2, 0], [0, 1], [1, 1]],
    [[0, 0], [1, 0], [1, 1], [2, 1]],
    [[1, 0], [0, 1], [1, 1], [0, 2]],
    [[0, 0], [0, 1], [1, 1], [1, 2]],
]

score = 0
for i in range(-2, n+2):
    for j in range(-2, m+2):
        for t in tets:
            s = 0
            for tt in t:
                try:
                    s += board[i+tt[0]][j+tt[1]]
                except:
                    s = 0
            score = max(score, s)

print(score)

# index error 다룰 때 try except 사용하기
# 대신 브루트 포스 범위는 더 여유있게
# 경우의 수 신경쓰기
